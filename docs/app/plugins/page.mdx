# Plugins

Extend Notiq's functionality with powerful plugins.

## Built-in Plugins

Notiq comes with several built-in plugins that can be enabled and configured.

### Markdown Plugin

Convert markdown syntax to formatted text in real-time.

#### Features

- **Auto-conversion** - Type markdown and see it formatted instantly
- **Keyboard shortcuts** - Use familiar markdown shortcuts
- **Bidirectional** - Convert between markdown and rich text

#### Usage

```tsx
<NotiqEditor
  plugins={{
    markdown: {
      enabled: true,
      shortcuts: true,
      autoConvert: true
    }
  }}
/>
```

#### Supported Syntax

| Markdown | Result |
|----------|--------|
| `**bold**` | **bold** |
| `*italic*` | *italic* |
| `# Heading 1` | Heading 1 |
| `## Heading 2` | Heading 2 |
| `- List item` | â€¢ List item |
| `1. Numbered` | 1. Numbered |
| `` `code` `` | `code` |
| `> Quote` | Quote block |

### Equations Plugin

Add mathematical equations with KaTeX.

#### Features

- **Inline equations** - $E = mc^2$
- **Block equations** - Display mode equations
- **Custom macros** - Define reusable shortcuts
- **Live preview** - See equations as you type

#### Usage

```tsx
<NotiqEditor
  plugins={{
    equations: {
      enabled: true,
      inline: true,
      block: true,
      macros: {
        '\\RR': '\\mathbb{R}',
        '\\NN': '\\mathbb{N}',
        '\\ZZ': '\\mathbb{Z}'
      }
    }
  }}
/>
```

#### Examples

Inline equation:
```
Type: $E = mc^2$ to render inline
```

Block equation:
```
Type: $$\int_0^\infty e^{-x^2} dx = \frac{\sqrt{\pi}}{2}$$
```

### Code Highlighting Plugin

Syntax highlighting for code blocks.

#### Features

- **100+ languages** - Support for most programming languages
- **Themes** - Multiple color themes
- **Line numbers** - Optional line numbering
- **Copy button** - One-click code copying

#### Usage

```tsx
<NotiqEditor
  plugins={{
    codeHighlight: {
      enabled: true,
      theme: 'github-dark',
      languages: [
        'javascript',
        'typescript',
        'python',
        'rust',
        'go',
        'java',
        'cpp'
      ],
      showLineNumbers: true,
      copyButton: true
    }
  }}
/>
```

#### Available Themes

- `github-light`
- `github-dark`
- `dracula`
- `monokai`
- `nord`
- `one-dark`
- `solarized-light`
- `solarized-dark`

### Auto-Link Plugin

Automatically convert URLs to clickable links.

#### Features

- **Auto-detection** - Recognizes URLs as you type
- **Protocol support** - HTTP, HTTPS, mailto, etc.
- **Link preview** - Hover to see destination
- **Custom behavior** - Configure link opening

#### Usage

```tsx
<NotiqEditor
  plugins={{
    autoLink: {
      enabled: true,
      protocols: ['http', 'https', 'mailto', 'tel'],
      openInNewTab: true
    }
  }}
/>
```

### Emoji Plugin

Insert emojis with shortcuts.

#### Usage

```tsx
<NotiqEditor
  plugins={{
    emoji: true
  }}
/>
```

#### Shortcuts

Type `:emoji_name:` to insert emojis:
- `:smile:` â†’ ðŸ˜Š
- `:heart:` â†’ â¤ï¸
- `:rocket:` â†’ ðŸš€
- `:fire:` â†’ ðŸ”¥

## Creating Custom Plugins

### Basic Plugin Structure

```typescript
import { createCustomPlugin } from '@collabchron/notiq'

const MyPlugin = createCustomPlugin({
  name: 'my-plugin',
  
  init: (editor) => {
    // Plugin initialization
    console.log('Plugin initialized')
    
    // Register commands
    editor.registerCommand('MY_COMMAND', () => {
      // Command logic
      return true
    })
    
    // Add event listeners
    editor.on('change', () => {
      console.log('Content changed')
    })
  },
  
  destroy: () => {
    // Cleanup
    console.log('Plugin destroyed')
  }
})

export default MyPlugin
```

### Using Custom Plugins

```tsx
import { NotiqEditor } from '@collabchron/notiq'
import MyPlugin from './plugins/MyPlugin'

export default function EditorWithCustomPlugin() {
  return (
    <NotiqEditor
      customPlugins={[MyPlugin]}
    />
  )
}
```

### Advanced Plugin Example

#### Word Count Plugin

```typescript
import { createCustomPlugin } from '@collabchron/notiq'

const WordCountPlugin = createCustomPlugin({
  name: 'word-count',
  
  init: (editor) => {
    let wordCountElement: HTMLElement | null = null
    
    const updateWordCount = () => {
      const text = editor.getTextContent()
      const words = text.trim().split(/\s+/).length
      const chars = text.length
      
      if (wordCountElement) {
        wordCountElement.textContent = `${words} words, ${chars} characters`
      }
    }
    
    // Create word count display
    wordCountElement = document.createElement('div')
    wordCountElement.className = 'word-count'
    editor.getContainer().appendChild(wordCountElement)
    
    // Update on content change
    editor.on('change', updateWordCount)
    updateWordCount()
    
    return () => {
      if (wordCountElement) {
        wordCountElement.remove()
      }
    }
  }
})
```

#### Auto-Save Plugin

```typescript
import { createCustomPlugin } from '@collabchron/notiq'

const AutoSavePlugin = createCustomPlugin({
  name: 'auto-save',
  
  init: (editor, options) => {
    const { interval = 5000, onSave } = options
    let timeoutId: NodeJS.Timeout
    
    const save = async () => {
      const content = editor.getContent()
      if (onSave) {
        await onSave(content)
      }
    }
    
    const scheduleAutoSave = () => {
      clearTimeout(timeoutId)
      timeoutId = setTimeout(save, interval)
    }
    
    editor.on('change', scheduleAutoSave)
    
    return () => {
      clearTimeout(timeoutId)
    }
  }
})

// Usage
<NotiqEditor
  customPlugins={[AutoSavePlugin]}
  pluginOptions={{
    'auto-save': {
      interval: 3000,
      onSave: async (content) => {
        await fetch('/api/save', {
          method: 'POST',
          body: JSON.stringify({ content })
        })
      }
    }
  }}
/>
```

## Plugin API

### Editor Instance Methods

Available in plugin `init` function:

| Method | Description |
|--------|-------------|
| `getContent()` | Get current content |
| `setContent(content)` | Set content |
| `getTextContent()` | Get plain text |
| `registerCommand(name, handler)` | Register command |
| `executeCommand(name, payload)` | Execute command |
| `on(event, handler)` | Add event listener |
| `off(event, handler)` | Remove event listener |
| `getContainer()` | Get editor container element |

### Events

| Event | Payload | Description |
|-------|---------|-------------|
| `change` | `{ content: string }` | Content changed |
| `focus` | - | Editor focused |
| `blur` | - | Editor blurred |
| `selection` | `{ selection: Selection }` | Selection changed |
| `error` | `{ error: Error }` | Error occurred |

## Plugin Best Practices

### 1. Cleanup

Always clean up in the destroy function:

```typescript
init: (editor) => {
  const listener = () => { /* ... */ }
  editor.on('change', listener)
  
  return () => {
    editor.off('change', listener)
  }
}
```

### 2. Performance

Debounce expensive operations:

```typescript
import { debounce } from 'lodash'

const expensiveOperation = debounce(() => {
  // Heavy computation
}, 300)

editor.on('change', expensiveOperation)
```

### 3. Error Handling

Handle errors gracefully:

```typescript
init: (editor) => {
  try {
    // Plugin logic
  } catch (error) {
    console.error('Plugin error:', error)
    editor.emit('error', { error })
  }
}
```

## Community Plugins

Explore community-created plugins:

- **Mentions Plugin** - @mention users
- **Hashtags Plugin** - #hashtag support
- **Slash Commands** - /command menu
- **AI Assistant** - AI-powered writing help
- **Collaboration** - Real-time collaboration
- **Version History** - Track changes over time

## Next Steps

- ðŸ”§ [Configuration](/configuration) - Configure plugins
- ðŸ“š [API Reference](/api) - Plugin API details
- ðŸ’¡ [Examples](/examples) - Plugin examples
